#!/bin/bash

set -e

APP_NAME="purnet"
INSTALL_DIR="/opt/$APP_NAME"
SHORTCUT_NAME="PurNet.desktop"
USER_HOME="$HOME"
PYTHON_PATH=$(which python3)

echo "âœ… Ù†ØµØ¨ $APP_NAME Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… Ø§Ø³Øª..."

# Ø³Ø§Ø®Øª Ù¾ÙˆØ´Ù‡ Ù†ØµØ¨
sudo mkdir -p "$INSTALL_DIR"
sudo cp main.py purwint icon.png "$INSTALL_DIR"
sudo chmod +x "$INSTALL_DIR/purwint"

# Ø³Ø§Ø®Øª ÙØ§ÛŒÙ„ Ø¯Ø³Ú©ØªØ§Ù¾ Ø¯Ø± Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ ÙØ¹Ù„ÛŒ
echo "ðŸ“„ Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ø®Øª ÙØ§ÛŒÙ„ Ø´ÙˆØ±ØªÚ©Ø§Øª..."

cat > "./$SHORTCUT_NAME" <<EOF
[Desktop Entry]
Name=PurNet
Exec=$PYTHON_PATH $INSTALL_DIR/main.py
Icon=$INSTALL_DIR/icon.png
Type=Application
Terminal=false
Categories=Network;
EOF

chmod +x "./$SHORTCUT_NAME"

echo "âœ… ÙØ§ÛŒÙ„ $SHORTCUT_NAME Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯."
echo "ðŸ“Œ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø±Ùˆ Ø¨Ú©Ø´ÙˆÙ†ÛŒ Ø±ÙˆÛŒ Ø¯Ø³Ú©ØªØ§Ù¾ ÛŒØ§ ØªÙˆÛŒ Ù…Ù†ÙˆÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ù‚Ø±Ø§Ø± Ø¨Ø¯ÛŒ."
