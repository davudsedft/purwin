#!/bin/bash

set -e

APP_NAME="purnet"
INSTALL_DIR="/opt/$APP_NAME"
DESKTOP_FILE="$HOME/.local/share/applications/$APP_NAME.desktop"

echo "✅ در حال نصب $APP_NAME ..."

# ساخت پوشه نصب
sudo mkdir -p "$INSTALL_DIR"
sudo cp main.py purwint icon.png "$INSTALL_DIR"
sudo chmod +x "$INSTALL_DIR/purwint"

# ساخت فایل desktop
echo "📁 در حال ساخت شورتکات دسکتاپ..."

cat > "$DESKTOP_FILE" <<EOF
[Desktop Entry]
Name=PurNet
Exec=python3 $INSTALL_DIR/main.py
Icon=$INSTALL_DIR/icon.png
Type=Application
Terminal=false
Categories=Network;
EOF

chmod +x "$DESKTOP_FILE"

echo "🎉 نصب کامل شد! شورتکات در منوی برنامه‌ها موجود است."
