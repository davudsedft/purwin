#!/bin/bash

set -e

APP_NAME="purnet"
INSTALL_DIR="/opt/$APP_NAME"
DESKTOP_FILE="$HOME/.local/share/applications/$APP_NAME.desktop"

echo "âœ… Ø¯Ø± Ø­Ø§Ù„ Ù†ØµØ¨ $APP_NAME ..."

# Ø³Ø§Ø®Øª Ù¾ÙˆØ´Ù‡ Ù†ØµØ¨
sudo mkdir -p "$INSTALL_DIR"
sudo cp main.py purwint icon.png "$INSTALL_DIR"
sudo chmod +x "$INSTALL_DIR/purwint"

# Ø³Ø§Ø®Øª ÙØ§ÛŒÙ„ desktop
echo "ðŸ“ Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ø®Øª Ø´ÙˆØ±ØªÚ©Ø§Øª Ø¯Ø³Ú©ØªØ§Ù¾..."

cat > "$DESKTOP_FILE" <<EOF
[Desktop Entry]
Name=PurNet
Exec=python3 $INSTALL_DIR/main.py
Icon=$INSTALL_DIR/icon.png
Type=Application
Terminal=false
Categories=Network;
EOF

chmod +x "$DESKTOP_FILE"

echo "ðŸŽ‰ Ù†ØµØ¨ Ú©Ø§Ù…Ù„ Ø´Ø¯! Ø´ÙˆØ±ØªÚ©Ø§Øª Ø¯Ø± Ù…Ù†ÙˆÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª."
